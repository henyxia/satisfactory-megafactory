{{ template "shards/common-top.html" }}
<div class="container">
    <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs">
        <ul>
            <li><a href="/">Overview</a></li>
            <li class=""><a href="{{ .floor.Factory.URLView }}">Factory: {{ .floor.Factory.Name }}</a></li>
            <li class="is-active"><a href="{{ .floor.URLView }}">{{ .floor.BreadcrumbName }}</a></li>
        </ul>
      </nav>
      <hr />
</div>
<div class="container">
    <div class="card">
        <div class="card-content">
            <div class="media">
                <div class="media-content" style="display: flex; justify-content: space-between;">
                    <div>
                        <p class="title is-4">{{ .floor.Name }}</p>
                        <p class="subtitle">Details view of level {{ .floor.Level }}</p>
                    </div>
                    <div>
                        <span class="material-symbols-outlined has-text-warning btn" onclick="showModal('floor-edit');">edit_square</span>
                        <span class="material-symbols-outlined has-text-danger btn" onclick="showModal('floor-delete');">delete</span>
                    </div>
                </div>
            </div>
            <div class="content">
                <dl>
                    <dt>Construction status</dt>
                    <dd><span class="tag {{ .floor.StatusUIClass }}">{{ .floor.Status }}</span></dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<div class="container">
    {{ range $line := .floor.ProductionLines }}
    <div class="block">
        <h3 class="subtitle" style="text-decoration: underline;">Production Line {{ $line.Number }}</h3>
        <div>
            <dl>
                <dt>Source</dt>
                <dd>Unknown</dd>
                <dt>Input Port</dt>
                <dd>
                    {{ if not $line.PortInput }}
                    <span class="tag tag-large is-warning">Disconnected</span>
                    {{ else }}
                    <div class="tags has-addons">
                        <span class="tag is-success">Connected</span>
                        <span class="tag">{{ $line.PortInput }}</span>
                    </div>
                    {{ end }}
                </dd>
                <dt>Recipe</dt>
                <dd>Iron Ingot</dd>
                <dt>Output Port</dt>
                <dd>
                    {{ if not $line.PortOutput }}
                    <span class="tag is-warning">Disconnected</span>
                    {{ else }}
                    <div class="tags has-addons">
                        <span class="tag is-success">Connected</span>
                        <span class="tag">{{ $line.PortOutput }}</span>
                    </div>
                    {{ end }}
                </dd>
                <dt>Destination</dt>
                <dd>Unknown</dd>
            </dl>
        </div>
    </div>
    {{ end }}
</div>

<div class="container">
    <hr />
    <div class="notification is-success is-light" style="text-align: center;">Add a new production line</div>
</div>

<!-- edit floor modal -->
<div id="modal-floor-edit" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Edit a floor</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <div class="field">
          <label class="label">Name</label>
          <div class="control">
            <input class="input" type="text" id="modal-floor-new-name" placeholder="Name of the new floor" value="{{ .floor.Name }}">
          </div>
        </div>
        <div class="field">
          <label class="label">Floor level</label>
          <div class="control">
            <input class="input" type="number" id="modal-floor-new-level" value="{{ .floor.Level }}">
          </div>
        </div>
        <div class="field">
          <label class="label">Status</label>
          <div class="control">
            <div class="select" style="width: 100%;">
              <select id="modal-floor-new-status" style="width: 100%;" autocomplete="off">
                <option value="absent" {{ if eq .floor.Status "absent" }}selected{{ end }}>Planned</option>
                <option value="in-progress" {{ if eq .floor.Status "in-progress" }}selected{{ end }}>In Progress</option>
                <option value="done" {{ if eq .floor.Status "done" }}selected{{ end }}>Done</option>
              </select>
            </div>
          </div>
        </div>
      </section>
      <footer class="modal-card-foot">
        <div class="buttons">
          <button class="button is-success" onclick="modalFloorEdit_Send({{ .floor.FactoryID }}, {{ .floor.ID }});">Save changes</button>
          <button class="button button-exit">Cancel</button>
        </div>
      </footer>
    </div>
  </div>

<!-- delete floor modal -->
<div id="modal-floor-delete" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Delete a floor</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <p>Are you sure to want to delete floor {{ .floor.Name }} located at level {{ .floor.Level }} ?</p>
      </section>
      <footer class="modal-card-foot">
        <div class="buttons">
          <button class="button is-danger" onclick="modalFloorDelete_Send({{ .floor.FactoryID }}, {{ .floor.ID }}, '{{ .floor.Factory.URLView }}');">Delete floor</button>
          <button class="button button-exit">Cancel</button>
        </div>
      </footer>
    </div>
</div>

<script type="text/javascript" src="/assets/js/floor-view.js"></script>

{{ template "shards/common-bottom.html" }}
